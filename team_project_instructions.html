<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michael T. Gastner">

<title>Team Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="team_project_instructions_files/libs/clipboard/clipboard.min.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<script src="team_project_instructions_files/libs/quarto-html/quarto.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<script src="team_project_instructions_files/libs/quarto-html/popper.min.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<script src="team_project_instructions_files/libs/quarto-html/tippy.umd.min.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<script src="team_project_instructions_files/libs/quarto-html/anchor.min.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<link href="team_project_instructions_files/libs/quarto-html/tippy.css?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu" rel="stylesheet">
<link href="team_project_instructions_files/libs/quarto-html/quarto-syntax-highlighting.css?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="team_project_instructions_files/libs/bootstrap/bootstrap.min.js?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu"></script>
<link href="team_project_instructions_files/libs/bootstrap/bootstrap-icons.css?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu" rel="stylesheet">
<link href="team_project_instructions_files/libs/bootstrap/bootstrap.min.css?_&amp;d2lSessionVal=fmGY7f9PG6ynmmYMg0jVKhWHu" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script>function lti_launch( vars, target ) {
						var query = '';
						var new_tab = false;

						for(var key in vars) {
							if(query.length == 0) {
								query += '?' + key + '=' + encodeURIComponent(vars[key]);
							}
							else {
								query += '&' + key + '=' + encodeURIComponent(vars[key]);
							}
						}

						var url = '/d2l/customization/pearsonlti/6606/Launch' + query;(target == '_blank') ? window.open( url, '_blank' ) : location.replace( url );}</script><script src="https://s.brightspace.com/lib/bsi/20.23.7-252/unbundled/mathjax.js?v=20.23.7.17667" type="module"></script><script>document.addEventListener('DOMContentLoaded', function() {
					if (document.querySelector('math') || /\$\$|\\\(|\\\[|\\begin{|\\ref{|\\eqref{/.test(document.body.innerHTML)) {
						document.querySelectorAll('mspace[linebreak="newline"]').forEach(elm => {
							elm.setAttribute('style', 'display: block; height: 0.5rem;');
						});

						window.D2L.MathJax.loadMathJax({
							'outputScale': 1.5,
							'renderLatex': false
						});
					}
				});</script><script src="https://s.brightspace.com/lib/bsi/20.23.7-252/unbundled/prism.js?v=20.23.7.17667" type="module"></script><script>document.addEventListener('DOMContentLoaded', function() {
					document.querySelectorAll('.d2l-code').forEach(code => {
						window.D2L.Prism.formatCodeElement(code);
					});
				});</script><script>window.addEventListener('message', function(event) { 
					if( !event.data ) {
						return;
					}

					var params;
					try {
						params = JSON.parse( event.data );
					}
					catch {
						return;
					}
					if( !params.subject || params.subject !== 'lti.frameResize' ) {
						return;
					}

					const MAX_FRAME_HEIGHT = 10000
					if( !params.height || params.height < 1 || params.height > MAX_FRAME_HEIGHT ) {
						console.warn( 'Invalid height value received, aborting' );
						return;
					}
					var el = document.getElementsByTagName( 'iframe' );
					for ( var i=0; i < el.length; i++ ) {
						if( el[i].contentWindow === event.source ) {
							el[i].style.height = params.height + 'px';
							el[i].style.width = '100%';
							console.info( 'Setting iFrame height to ' + params.height );
							console.info( 'Setting iFrame width to 100%' );
						}
					}
				});</script></head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Team Project</h1>
<p class="subtitle lead">CSC3007: Information Visualisation</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Michael T. Gastner </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="overview" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Overview</h1>
<p>You and your teammates will create a slide show that explores a research question of your choice related to the Sustainable Development Goals. These goals are a set of 17 global objectives established by the United Nations in 2015. The slide show should incorporate data visualisation, spoken content and written text to address the research question.</p>
<p>The deadline for submitting the slide show is <strong>19 July (Wednesday) at 23:59</strong>. Presentations will be held on the last two Fridays of the trimester (21 July and 28 July) during the regular lab times. Half of the teams will present on the 21st and the other half on the 28th. Attendance is mandatory for all team members, even on the date when your team does not present, because providing feedback to other teams is part of the assignment.</p>
</section>
<section id="instructions" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Instructions</h1>
<section id="sec-prep-tasks" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-prep-tasks"><span class="header-section-number">2.1</span> Preparatory Tasks</h2>
<ol type="1">
<li><p>Please go through the 17 Sustainable Development Goals listed at <a href="https://unstats-undesa.opendata.arcgis.com/" class="uri">https://unstats-undesa.opendata.arcgis.com/</a> and select two goals that you believe may be associated. For instance, you might consider that there is a relationship between Goal 4 (Quality Education) and Goal 5 (Gender Equality) because empowering individuals, regardless of their gender identity, helps break cycles of discrimination that have historically hindered women from participating in education and politics at equal rates to men.</p></li>
<li><p>Each selected goal comprises multiple targets, which are measured by various indicators. You can find a comprehensive list of indicators at <a href="https://unstats.un.org/sdgs/metadata" class="uri">https://unstats.un.org/sdgs/metadata</a>. For instance, one of the targets associated with Goal 4 (Quality Education) is Target 4.2: ‘Equal access to quality pre-primary education,’ and an indicator for this target is Indicator 4.2.2: ‘Participation rate in organized learning (one year before the official primary entry age), by sex.’</p>
<p>Select two quantitative indicators for each of the chosen goals. For instance, the indicators could be:</p>
<ul>
<li>Indicator 4.2.2: Participation rate in organized learning (one year before the official primary entry age), by sex</li>
<li>Indicator 4.3.1: Participation rate of youth and adults in formal and non-formal education and training in the previous 12 months, by sex</li>
<li>Indicator 5.5.1(a): Proportion of seats held by women in national parliaments</li>
<li>Indicator 5.5.1(b): Proportion of elected seats held by women in deliberative bodies of local government</li>
</ul>
<p>If you do not find a suitable indicator, you may choose country-level data from other sources (e.g.&nbsp;the World Bank).</p></li>
<li><p>In addition to the four selected indicators, every team is required to include three additional country-level variables. For example, the following data are available from the file <code>WB_countries_Admin0.geojson</code>, previously used in the exercise ‘Choropleth Maps of Country-Level Statistics’:</p>
<ul>
<li>The region of the country according to 7 classifiers by the World Bank, such as ‘East Asia &amp; Pacific’ or ‘Latin America &amp; Caribbean’</li>
<li>The income group (e.g.&nbsp;‘Upper middle income’)</li>
<li>The size of the population</li>
</ul>
<p>However, you may choose other variables (e.g.&nbsp;life expectancy or the Happy Planet Index) if any of those mentioned above is already closely related to your chosen Sustainable Development Goals indicators. Determine research questions that can be addressed based on all 7 data sets.</p>
<p>A research question that incorporates all of the aforementioned data sets could be: ‘To what extent does female participation in education, spanning from early childhood to adulthood, influence the representation of women in politics? Specifically, what is the relationship between the level of female education and the proportion of seats held by women in local and national political institutions? Can population, income group and region be used as predictors of female participation in education and in politics?’</p></li>
<li><p>Ensure that you understand the meaning and measurement methodology of each selected indicator.</p></li>
<li><p>Download the data sets for the selected indicators from <a href="https://unstats-undesa.opendata.arcgis.com/" class="uri">https://unstats-undesa.opendata.arcgis.com/</a> in CSV format and explore their content. Ensure that you understand the meaning of the values in the column titled <code>latest_value</code>. If you find it unclear, consider selecting different data sets.</p></li>
<li><p>Determine whether you need to summarise the data (e.g.&nbsp;combine data for multiple educational levels) or filter the data (e.g.&nbsp;include only female data) to answer your research question.</p></li>
<li><p>Explore the values in each data set. If there are many missing values or there is hardly any variation in the values, choose a different data set and modify your research question accordingly to align with the newly chosen data set.</p></li>
<li><p>Before conducting any data analysis, document your expectations regarding the relationships between the indicators <em>within the same goal</em>. Explain why you anticipate these relationships. Here is an example:</p>
<ol type="a">
<li>We anticipate a <em>positive association</em> between female participation in pre-primary education and education as youth or adults because both indicators are linked to the societal roles traditionally attributed to females. As access to quality pre-primary education increases, it can contribute to higher educational attainment and opportunities for females later in life.</li>
<li>We anticipate a <em>positive association</em> between female participation in local and national political institutions because local government often serves as a stepping stone or recruitment pool for national parliaments. As more women become involved in local government, it can lead to increased representation of women in higher-level political positions.</li>
</ol></li>
<li><p>Before conducting any data analysis, document your expectations regarding the relationships <em>between the indicators for different goals</em>. Explain why you anticipate these relationships. Here is an example:</p>
<ul>
<li><p>We anticipate <em>no significant association</em> between pre-primary education and representation in both</p>
<ol type="a">
<li>national parliaments and</li>
<li>deliberative bodies of local government</li>
</ol></li>
</ul>
<p>because early childhood education primarily focuses on foundational learning and is unlikely to directly influence political activity as an adult.</p>
<ul>
<li><p>We anticipate a positive association between education after childhood (such as technical, vocational and tertiary education) and representation in both</p>
<ol type="a">
<li>national parliaments and</li>
<li>deliberative bodies of local government</li>
</ol>
<p>because education beyond early childhood tends to enhance political awareness and provide individuals with the necessary knowledge and skills to engage in political processes.</p></li>
</ul></li>
<li><p>Before conducting any data analysis, consider which of the following predictors you expect to be the most and least important in predicting the combination of the selected indicators:</p>
<ul>
<li>Region</li>
<li>Income group</li>
<li>Size of the population</li>
</ul>
<p>Explain why you anticipate them to be the most and least important predictors. Here is an example:</p>
<ol type="a">
<li><p>Region is expected to be the most important predictor due to the influence of varying cultural, social, and political contexts on education and political representation. Different regions may have distinct educational systems, gender norms and political structures that can significantly impact female participation in education and politics.</p></li>
<li><p>Population size is expected to be the least important predictor because participation in education and politics is primarily influenced by individual and family decisions. The size of the population is unlikely to directly affect an individual’s access to education or their inclination to participate in political processes.</p></li>
</ol></li>
</ol>
<p>Please note that these are examples, and your expectations and reasoning may differ based on the specific context and data being analysed.</p>
</section>
<section id="write-the-slide-show" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="write-the-slide-show"><span class="header-section-number">2.2</span> Write the Slide Show</h2>
<ol type="1">
<li><p>Use Quarto’s revealjs format for the slide show (refer to <a href="https://quarto.org/docs/presentations/revealjs/" class="uri">https://quarto.org/docs/presentations/revealjs/</a>).</p></li>
<li><p>Clearly state your research question and provide an explanation for its significance.</p></li>
<li><p>Specify the Sustainable Development Goals and targets that are addressed by the research question. <!-- (4) State the anticipated relationships between the indicators before conducting data analysis, as mentioned in steps (8) to (10) of @sec-prep-tasks. Additionally, indicate which predictor (region, income group and population) you expect to be the most and least important. Briefly explain the rationale behind your hypotheses. --></p></li>
<li><p>In the Quarto file, include a code chunk to merge the data from the file<code>WB_countries_Admin0.geojson</code> with the four selected indicators. The resulting data structure should be an <code>sf</code> object containing columns with the following data:</p>
<ul>
<li>The latest values of the four selected indicators</li>
<li>The region classifier according to the World Bank, such as ‘East Asia &amp; Pacific’ or ‘Latin America &amp; Caribbean’</li>
<li>The income group (e.g.&nbsp;‘Upper middle income’) or, if income is already one of your indicators, another country-level data set (e.g.&nbsp;life expectancy or the Happy Planet Index)</li>
<li>Population or, if population is already one of your indicators, another country-level data set</li>
<li>The geometries of the country boundaries</li>
</ul>
<p>Please note that the code chunk should be evaluated but not displayed in the slides, as there is no need to present the code during the talk. <!-- (6) Exclude all countries with missing values and specify the number of countries included in the data set. --></p></li>
<li><p>Use at least one interactive pairs plot to summarise and contrast the observed indicators and point out noteworthy features of the data.</p></li>
<li><p>Present at least one table showcasing some of the best-performing and some of the worst-performing countries, including their corresponding indicator values. You can refer to resources such as <a href="https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/">‘How to Make Beautiful Tables in R’</a> and <a href="https://towardsdatascience.com/top-7-packages-for-making-beautiful-tables-in-r-7683d054e541">‘Top 7 Packages for Making Beautiful Tables in R’</a> for inspiration on creating visually appealing tables.</p></li>
<li><p>Present the data using maps. If you opt for a choropleth map, ensure that the data meets all the necessary criteria for this specific map type.</p></li>
<li><p>Normalise the indicator data and perform <span class="math inline">\(k\)</span>-means clustering. Justify your choice of <span class="math inline">\(k\)</span> using visual arguments.</p></li>
<li><p>Based on visual evidence, interpret the meaning of the <span class="math inline">\(k\)</span> clusters in terms of the values of the indicators.</p></li>
<li><p>Can the region, income group and population (or alternative country-level statistics) accurately predict the cluster to which a country belongs? If so, which of these predictors is the most important, and which one is the least important? Support your answer visually and quantitatively using a decision tree.</p></li>
<li><p>Summarise your findings and state the policy implications.</p></li>
</ol>
</section>
<section id="submission" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="submission"><span class="header-section-number">2.3</span> Submission</h2>
<p>Please complete the aforementioned tasks and submit a ZIP file containing all the files in your RStudio project to the xSITe Dropbox folder titled ‘Slide Show for Team Project’. The ZIP file should include one Quarto document and the corresponding HTML slide show generated from it. It is crucial to test the ZIP file to ensure that the reviewer can accurately render the HTML file solely from the ZIP file. The submission deadline is <strong>19 July (Wednesday) at 23:59</strong>.</p>
</section>
<section id="presentation" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="presentation"><span class="header-section-number">2.4</span> Presentation</h2>
<p>For the presentation, please keep the following points in mind:</p>
<ol type="1">
<li>The duration of the presentation is 18 minutes, followed by a 3-minute question-and-answer session with the audience. Additionally, the audience will have 3 minutes to provide qualitative feedback about the presentation via xSITe. It is important to manage the timing of each section to ensure that the presentation fits within the allocated time.</li>
<li>Clearly articulate the research questions. The research questions should serve as the central focus of your presentation. <!-- (3) Develop hypotheses related to your research questions and provide a clear explanation for the reasoning behind each hypothesis. --></li>
<li>Assign specific sections for each team member to present, ensuring equal participation and contribution from all team members.</li>
<li>Rehearse the presentation as a team to ensure a smooth and cohesive flow. Practice transitions between sections and ensure that the overall presentation is coherent and logical.</li>
<li>Create visually appealing slides and visuals that effectively communicate the data.</li>
<li>Avoid displaying long passages of code in the presentation. Instead, focus on presenting the key findings, insights, and visualisations derived from the data analysis.</li>
</ol>
</section>
</section>
<section id="rubrics" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Rubrics</h1>
<ol type="1">
<li>Clear and well-defined research question that addresses a relevant topic.</li>
<li>Coherent and logical flow of information with smooth transitions between sections.</li>
<li>The selected data are suitable for investigating the research question.</li>
<li>A correct conclusion is drawn at the end of the presentation.</li>
<li>Effective use of data visualisation to support key points.</li>
<li>Some graphics contain basic interactivity (e.g.&nbsp;infotips allowing the identification of individual data points).</li>
<li>Balance between text and visuals, avoiding information overload on slides.</li>
<li>Equal and active participation of all team members.</li>
<li>Smooth and professional delivery of the presentation, with clear and confident speaking.</li>
<li>The slide show is written in good English.</li>
<li>Well-rehearsed and coordinated team presentation, with seamless transitions between speakers.</li>
<li>Adherence to the allocated presentation time.</li>
<li>Competent and effective responses to questions from the audience.</li>
<li>Ability to communicate the significance and implications of the research findings.</li>
<li>The Quarto code is correct, and <code>lintr::lint()</code> does not indicate any stylistic mistakes.</li>
<li>All team members provide feedback about the slide shows and presentations by all other teams in the same lab section on both days of presentation (21 July and 28 July).</li>
</ol>
</section>
<section id="criteria-for-high-scores" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Criteria for high scores</h1>
<ol type="1">
<li>Advanced interaction techniques are successfully employed to gain a better understanding of the data. Relevant R packages include <strong>shiny</strong>, <strong>gganimate</strong>, <strong>plotly</strong>, <strong>leaflet</strong> and <strong>htmlwidgets</strong>. Note that points may be deducted if the interactivity is hindering rather than helpful.</li>
<li>Conducting comprehensive data analysis, including appropriate statistical techniques, and providing insightful interpretations of the findings. Demonstrating a deep understanding of the data and its implications.</li>
<li>Incorporating relevant and reliable external sources, such as scholarly articles, reports or case studies, to support the research question and enrich the content of the slide show.</li>
<li>Including interactive elements in the slide show presentation, such as polls, quizzes or interactive charts, to actively engage the audience and enhance their participation.</li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>